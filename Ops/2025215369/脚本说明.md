# 入口脚本

*networkctl.sh* 

统一对外入口


# 网络配置脚本

*config.sh* 

设置DHCP模式/静态IP模式 切换与回滚

*set_dhcp*()  设置DHCP模式

*set_static*()  设置静态IP模式

*rollback*()  回滚到上一配置


# 生产网络隔离脚本

*isolation.sh* 

允许访问同一内网网段地址

允许访问内部网络地址

禁止访问公网地址


enable_isolation()  启用隔离 --> firewalld_enable()  启用访问控制

disable_isolation() 关闭隔离 --> firewalld_disable()  关闭访问控制


# 检测监控脚本

start()  启动后台监控  

stop()  停止后台监控  

status()  检查运行状态


run_loop()  监控循环

check_public()  检测公网可达性


# 公共函数库

日志输出

网络状态 保存/加载


log()  日志输出


save_state()  保存当前网络状态，为回滚使用

load_state()  加载上次保存的网络状态

